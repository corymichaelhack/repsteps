{"remainingRequest":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js!/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js!/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/coryhack/repSteps-recorder/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/coryhack/repSteps-recorder/src/modules/overlay/Selector.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/coryhack/repSteps-recorder/src/modules/overlay/Selector.vue","mtime":1642800781935},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js","mtime":1643048371203},{"path":"/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js","mtime":1643048374140},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1643048376026}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2NvcnloYWNrL3JlcFN0ZXBzLXJlY29yZGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG92ZXJsYXk6IG51bGwsCiAgICAgIHNlbGVjdG9yOiBudWxsLAogICAgICBlbGVtZW50OiBudWxsLAogICAgICBzY3JvbGxpbmc6IGZhbHNlLAogICAgICBkaW1lbnNpb25zOiB7fQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsnc2NyZWVuc2hvdENsaXBwZWRNb2RlJywgJ3NjcmVlbnNob3RNb2RlJywgJ2lzU3RvcHBlZCddKSksIHt9LCB7CiAgICBzZWxlY3RvckNsYXNzOiBmdW5jdGlvbiBzZWxlY3RvckNsYXNzKCkgewogICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5zY3JlZW5zaG90TW9kZSB8fCB0aGlzLnNjcmVlbnNob3RDbGlwcGVkTW9kZSkgewogICAgICAgIHJldHVybiB0aGlzLnNjcm9sbGluZyA/ICdoaWRlIHNlbGVjdG9yJyA6ICdzZWxlY3Rvcic7CiAgICAgIH0KCiAgICAgIHJldHVybiAnJzsKICAgIH0KICB9KSwKICBtZXRob2RzOiB7CiAgICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGUpIHsKICAgICAgdmFyIHNraXBwZWRTZWxlY3RvcnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwoKICAgICAgaWYgKHRoaXMuZWxlbWVudCA9PT0gZS50YXJnZXQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZWxlbWVudCA9IGUudGFyZ2V0OwoKICAgICAgaWYgKHNraXBwZWRTZWxlY3RvcnMuaW5jbHVkZXModGhpcy5lbGVtZW50LmlkKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5kaW1lbnNpb25zLnRvcCA9IC13aW5kb3cuc2Nyb2xsWTsKICAgICAgdGhpcy5kaW1lbnNpb25zLmxlZnQgPSAtd2luZG93LnNjcm9sbFg7CiAgICAgIHZhciBlbGVtID0gZS50YXJnZXQ7CgogICAgICB3aGlsZSAoZWxlbSAmJiBlbGVtICE9PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgICAgdGhpcy5kaW1lbnNpb25zLnRvcCArPSBlbGVtLm9mZnNldFRvcDsKICAgICAgICB0aGlzLmRpbWVuc2lvbnMubGVmdCArPSBlbGVtLm9mZnNldExlZnQ7CiAgICAgICAgZWxlbSA9IGVsZW0ub2Zmc2V0UGFyZW50OwogICAgICB9CgogICAgICB0aGlzLmRpbWVuc2lvbnMud2lkdGggPSB0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGggKyAyOwogICAgICB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0ID0gdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodCArIDI7CiAgICAgIHRoaXMuJHJlZnMuc2VsZWN0b3Iuc3R5bGUudG9wID0gdGhpcy5kaW1lbnNpb25zLnRvcCAtIDIgKyAncHgnOwogICAgICB0aGlzLiRyZWZzLnNlbGVjdG9yLnN0eWxlLmxlZnQgPSB0aGlzLmRpbWVuc2lvbnMubGVmdCAtIDIgKyAncHgnOwogICAgICB0aGlzLiRyZWZzLnNlbGVjdG9yLnN0eWxlLndpZHRoID0gdGhpcy5kaW1lbnNpb25zLndpZHRoICsgJ3B4JzsKICAgICAgdGhpcy4kcmVmcy5zZWxlY3Rvci5zdHlsZS5oZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0ICsgJ3B4JzsKICAgIH0sCiAgICAvLyBUT0RPOiBJbnRlZ3JhdGUgc2hvb3RlciB3aXRoIHNlbGVjdG9yCiAgICBjbGljazogZnVuY3Rpb24gY2xpY2soZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNsaXAgPSBudWxsOwoKICAgICAgICBpZiAoX3RoaXMuJHJlZnMuc2VsZWN0b3IpIHsKICAgICAgICAgIGNsaXAgPSB7CiAgICAgICAgICAgIHg6IF90aGlzLiRyZWZzLnNlbGVjdG9yLnN0eWxlLmxlZnQsCiAgICAgICAgICAgIHk6IF90aGlzLiRyZWZzLnNlbGVjdG9yLnN0eWxlLnRvcCwKICAgICAgICAgICAgd2lkdGg6IF90aGlzLiRyZWZzLnNlbGVjdG9yLnN0eWxlLndpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IF90aGlzLiRyZWZzLnNlbGVjdG9yLnN0eWxlLmhlaWdodAogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIF90aGlzLiRlbWl0KCdjbGljaycsIHsKICAgICAgICAgIGNsaXA6IGNsaXAsCiAgICAgICAgICByYXc6IGUKICAgICAgICB9KTsKICAgICAgfSwgMTAwKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/coryhack/repSteps-recorder/src/modules/overlay/Selector.vue"],"names":[],"mappings":";;;AAOA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,IADJ;AAEL,MAAA,QAAQ,EAAE,IAFL;AAGL,MAAA,OAAO,EAAE,IAHJ;AAIL,MAAA,SAAS,EAAE,KAJN;AAKL,MAAA,UAAU,EAAE;AALP,KAAP;AAOD,GATY;AAWb,EAAA,QAAQ,kCACH,QAAQ,CAAC,CAAC,uBAAD,EAA0B,gBAA1B,EAA4C,WAA5C,CAAD,CADL;AAGN,IAAA,aAHM,2BAGU;AACd,UAAI,KAAK,SAAT,EAAoB;AAClB,eAAO,EAAP;AACF;;AAEA,UAAI,CAAC,KAAK,cAAN,IAAwB,KAAK,qBAAjC,EAAwD;AACtD,eAAO,KAAK,SAAL,GAAiB,eAAjB,GAAmC,UAA1C;AACF;;AAEA,aAAO,EAAP;AACD;AAbK,IAXK;AA2Bb,EAAA,OAAO,EAAE;AACP,IAAA,IADO,gBACF,CADE,EACwB;AAAA,UAAvB,gBAAuB,uEAAJ,EAAI;;AAC7B,UAAI,KAAK,OAAL,KAAiB,CAAC,CAAC,MAAvB,EAA+B;AAC7B;AACF;;AAEA,WAAK,OAAL,GAAe,CAAC,CAAC,MAAjB;;AAEA,UAAI,gBAAgB,CAAC,QAAjB,CAA0B,KAAK,OAAL,CAAa,EAAvC,CAAJ,EAAgD;AAC9C;AACF;;AAEA,WAAK,UAAL,CAAgB,GAAhB,GAAsB,CAAC,MAAM,CAAC,OAA9B;AACA,WAAK,UAAL,CAAgB,IAAhB,GAAuB,CAAC,MAAM,CAAC,OAA/B;AAEA,UAAI,IAAG,GAAI,CAAC,CAAC,MAAb;;AAEA,aAAO,IAAG,IAAK,IAAG,KAAM,QAAQ,CAAC,IAAjC,EAAuC;AACrC,aAAK,UAAL,CAAgB,GAAhB,IAAuB,IAAI,CAAC,SAA5B;AACA,aAAK,UAAL,CAAgB,IAAhB,IAAwB,IAAI,CAAC,UAA7B;AACA,QAAA,IAAG,GAAI,IAAI,CAAC,YAAZ;AACF;;AAEA,WAAK,UAAL,CAAgB,KAAhB,GAAwB,KAAK,OAAL,CAAa,WAAb,GAA2B,CAAnD;AACA,WAAK,UAAL,CAAgB,MAAhB,GAAyB,KAAK,OAAL,CAAa,YAAb,GAA4B,CAArD;AAEA,WAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,GAA1B,GAAgC,KAAK,UAAL,CAAgB,GAAhB,GAAsB,CAAtB,GAA0B,IAA1D;AACA,WAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,IAA1B,GAAiC,KAAK,UAAL,CAAgB,IAAhB,GAAuB,CAAvB,GAA2B,IAA5D;AACA,WAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,KAA1B,GAAkC,KAAK,UAAL,CAAgB,KAAhB,GAAwB,IAA1D;AACA,WAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,MAA1B,GAAmC,KAAK,UAAL,CAAgB,MAAhB,GAAyB,IAA5D;AACD,KA9BM;AAgCP;AACA,IAAA,KAjCO,iBAiCD,CAjCC,EAiCE;AAAA;;AACP,MAAA,UAAU,CAAC,YAAM;AACf,YAAI,IAAG,GAAI,IAAX;;AAEA,YAAI,KAAI,CAAC,KAAL,CAAW,QAAf,EAAyB;AACvB,UAAA,IAAG,GAAI;AACL,YAAA,CAAC,EAAE,KAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,IADxB;AAEL,YAAA,CAAC,EAAE,KAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,GAFxB;AAGL,YAAA,KAAK,EAAE,KAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,KAH5B;AAIL,YAAA,MAAM,EAAE,KAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B;AAJ7B,WAAP;AAMF;;AAEA,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,EAAoB;AAAE,UAAA,IAAI,EAAJ,IAAF;AAAQ,UAAA,GAAG,EAAE;AAAb,SAApB;AACD,OAbS,EAaP,GAbO,CAAV;AAcD;AAhDM;AA3BI,CAAf","sourcesContent":["<template>\n  <div class=\"overlay\">\n    <div :class=\"selectorClass\" ref=\"selector\"></div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      overlay: null,\n      selector: null,\n      element: null,\n      scrolling: false,\n      dimensions: {},\n    }\n  },\n\n  computed: {\n    ...mapState(['screenshotClippedMode', 'screenshotMode', 'isStopped']),\n\n    selectorClass() {\n      if (this.isStopped) {\n        return ''\n      }\n\n      if (!this.screenshotMode || this.screenshotClippedMode) {\n        return this.scrolling ? 'hide selector' : 'selector'\n      }\n\n      return ''\n    },\n  },\n\n  methods: {\n    move(e, skippedSelectors = []) {\n      if (this.element === e.target) {\n        return\n      }\n\n      this.element = e.target\n\n      if (skippedSelectors.includes(this.element.id)) {\n        return\n      }\n\n      this.dimensions.top = -window.scrollY\n      this.dimensions.left = -window.scrollX\n\n      let elem = e.target\n\n      while (elem && elem !== document.body) {\n        this.dimensions.top += elem.offsetTop\n        this.dimensions.left += elem.offsetLeft\n        elem = elem.offsetParent\n      }\n\n      this.dimensions.width = this.element.offsetWidth + 2\n      this.dimensions.height = this.element.offsetHeight + 2\n\n      this.$refs.selector.style.top = this.dimensions.top - 2 + 'px'\n      this.$refs.selector.style.left = this.dimensions.left - 2 + 'px'\n      this.$refs.selector.style.width = this.dimensions.width + 'px'\n      this.$refs.selector.style.height = this.dimensions.height + 'px'\n    },\n\n    // TODO: Integrate shooter with selector\n    click(e) {\n      setTimeout(() => {\n        let clip = null\n\n        if (this.$refs.selector) {\n          clip = {\n            x: this.$refs.selector.style.left,\n            y: this.$refs.selector.style.top,\n            width: this.$refs.selector.style.width,\n            height: this.$refs.selector.style.height,\n          }\n        }\n\n        this.$emit('click', { clip, raw: e })\n      }, 100)\n    },\n  },\n}\n</script>\n\n<style scoped>\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 2147483646;\n}\n\n.selector {\n  padding: 1px;\n  position: fixed;\n  background: rgba(255, 73, 73, 0.1);\n  border: 2px dashed rgba(255, 73, 73, 0.7);\n}\n\n.hide {\n  display: none;\n}\n</style>\n"],"sourceRoot":""}]}