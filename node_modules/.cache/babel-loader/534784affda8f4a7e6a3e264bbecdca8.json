{"remainingRequest":"/Users/coryhack/headless-recorder/node_modules/babel-loader/lib/index.js!/Users/coryhack/headless-recorder/node_modules/eslint-loader/index.js??ref--13-0!/Users/coryhack/headless-recorder/src/modules/code-generator/base-generator.js","dependencies":[{"path":"/Users/coryhack/headless-recorder/src/modules/code-generator/base-generator.js","mtime":1642800781934},{"path":"/Users/coryhack/headless-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/headless-recorder/node_modules/babel-loader/lib/index.js","mtime":1643048374140},{"path":"/Users/coryhack/headless-recorder/node_modules/eslint-loader/index.js","mtime":1643048371599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9jb3J5aGFjay9oZWFkbGVzcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvY29yeWhhY2svaGVhZGxlc3MtcmVjb3JkZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9jb3J5aGFjay9oZWFkbGVzcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9jb3J5aGFjay9oZWFkbGVzcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCBCbG9jayBmcm9tICdAL21vZHVsZXMvY29kZS1nZW5lcmF0b3IvYmxvY2snOwppbXBvcnQgeyBoZWFkbGVzc0FjdGlvbnMsIGV2ZW50c1RvUmVjb3JkIH0gZnJvbSAnQC9tb2R1bGVzL2NvZGUtZ2VuZXJhdG9yL2NvbnN0YW50cyc7CmV4cG9ydCB2YXIgZGVmYXVsdHMgPSB7CiAgd3JhcEFzeW5jOiBmYWxzZSwKICBoZWFkbGVzczogdHJ1ZSwKICB3YWl0Rm9yTmF2aWdhdGlvbjogdHJ1ZSwKICB3YWl0Rm9yU2VsZWN0b3JPbkNsaWNrOiB0cnVlLAogIGJsYW5rTGluZXNCZXR3ZWVuQmxvY2tzOiB0cnVlLAogIGRhdGFBdHRyaWJ1dGU6ICcnLAogIHNob3dQbGF5d3JpZ2h0Rmlyc3Q6IHRydWUsCiAga2V5Q29kZTogOQp9OwoKdmFyIEJhc2VHZW5lcmF0b3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEJhc2VHZW5lcmF0b3Iob3B0aW9ucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VHZW5lcmF0b3IpOwoKICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCBvcHRpb25zKTsKICAgIHRoaXMuX2Jsb2NrcyA9IFtdOwogICAgdGhpcy5fZnJhbWUgPSAncGFnZSc7CiAgICB0aGlzLl9mcmFtZUlkID0gMDsKICAgIHRoaXMuX2FsbEZyYW1lcyA9IHt9OwogICAgdGhpcy5fc2NyZWVuc2hvdENvdW50ZXIgPSAwOwogICAgdGhpcy5faGFzTmF2aWdhdGlvbiA9IGZhbHNlOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEJhc2VHZW5lcmF0b3IsIFt7CiAgICBrZXk6ICJnZW5lcmF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkLicpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRIZWFkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRIZWFkZXIoKSB7CiAgICAgIHZhciBfaGRyOwoKICAgICAgdmFyIGhkciA9IHRoaXMuX29wdGlvbnMud3JhcEFzeW5jID8gdGhpcy5fd3JhcHBlZEhlYWRlciA6IHRoaXMuX2hlYWRlcjsKICAgICAgaGRyID0gdGhpcy5fb3B0aW9ucy5oZWFkbGVzcyA/IGhkciA6IChfaGRyID0gaGRyKSA9PT0gbnVsbCB8fCBfaGRyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaGRyLnJlcGxhY2UoJ2xhdW5jaCgpJywgJ2xhdW5jaCh7IGhlYWRsZXNzOiBmYWxzZSB9KScpOwogICAgICByZXR1cm4gaGRyOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRGb290ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRGb290ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zLndyYXBBc3luYyA/IHRoaXMuX3dyYXBwZWRGb290ZXIgOiB0aGlzLl9mb290ZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3BhcnNlRXZlbnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VFdmVudHMoZXZlbnRzKSB7CiAgICAgIHZhciByZXN1bHQgPSAnJzsKICAgICAgaWYgKCFldmVudHMpIHJldHVybiByZXN1bHQ7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBfZXZlbnRzJGkgPSBldmVudHNbaV0sCiAgICAgICAgICAgIGFjdGlvbiA9IF9ldmVudHMkaS5hY3Rpb24sCiAgICAgICAgICAgIHNlbGVjdG9yID0gX2V2ZW50cyRpLnNlbGVjdG9yLAogICAgICAgICAgICB2YWx1ZSA9IF9ldmVudHMkaS52YWx1ZSwKICAgICAgICAgICAgaHJlZiA9IF9ldmVudHMkaS5ocmVmLAogICAgICAgICAgICBrZXlDb2RlID0gX2V2ZW50cyRpLmtleUNvZGUsCiAgICAgICAgICAgIHRhZ05hbWUgPSBfZXZlbnRzJGkudGFnTmFtZSwKICAgICAgICAgICAgZnJhbWVJZCA9IF9ldmVudHMkaS5mcmFtZUlkLAogICAgICAgICAgICBmcmFtZVVybCA9IF9ldmVudHMkaS5mcmFtZVVybDsKICAgICAgICB2YXIgZXNjYXBlZFNlbGVjdG9yID0gc2VsZWN0b3IgPyBzZWxlY3RvciA9PT0gbnVsbCB8fCBzZWxlY3RvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0b3IucmVwbGFjZSgvXFwvZywgJ1xcXFwnKSA6IHNlbGVjdG9yOyAvLyB3ZSBuZWVkIHRvIGtlZXAgYSBoYW5kbGUgb24gd2hhdCBmcmFtZXMgZXZlbnRzIG9yaWdpbmF0ZSBmcm9tCgogICAgICAgIHRoaXMuX3NldEZyYW1lcyhmcmFtZUlkLCBmcmFtZVVybCk7CgogICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7CiAgICAgICAgICBjYXNlICdrZXlkb3duJzoKICAgICAgICAgICAgaWYgKGtleUNvZGUgPT09IHRoaXMuX29wdGlvbnMua2V5Q29kZSkgewogICAgICAgICAgICAgIHRoaXMuX2Jsb2Nrcy5wdXNoKHRoaXMuX2hhbmRsZUtleURvd24oZXNjYXBlZFNlbGVjdG9yLCB2YWx1ZSwga2V5Q29kZSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdjbGljayc6CiAgICAgICAgICAgIHRoaXMuX2Jsb2Nrcy5wdXNoKHRoaXMuX2hhbmRsZUNsaWNrKGVzY2FwZWRTZWxlY3RvciwgZXZlbnRzKSk7CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdjaGFuZ2UnOgogICAgICAgICAgICBpZiAodGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHsKICAgICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaCh0aGlzLl9oYW5kbGVDaGFuZ2UoZXNjYXBlZFNlbGVjdG9yLCB2YWx1ZSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIGhlYWRsZXNzQWN0aW9ucy5HT1RPOgogICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaCh0aGlzLl9oYW5kbGVHb3RvKGhyZWYsIGZyYW1lSWQpKTsKCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgaGVhZGxlc3NBY3Rpb25zLlZJRVdQT1JUOgogICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaCh0aGlzLl9oYW5kbGVWaWV3cG9ydCh2YWx1ZS53aWR0aCwgdmFsdWUuaGVpZ2h0KSk7CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIGhlYWRsZXNzQWN0aW9ucy5OQVZJR0FUSU9OOgogICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaCh0aGlzLl9oYW5kbGVXYWl0Rm9yTmF2aWdhdGlvbigpKTsKCiAgICAgICAgICAgIHRoaXMuX2hhc05hdmlnYXRpb24gPSB0cnVlOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIGhlYWRsZXNzQWN0aW9ucy5TQ1JFRU5TSE9UOgogICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaCh0aGlzLl9oYW5kbGVTY3JlZW5zaG90KHZhbHVlKSk7CgogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9oYXNOYXZpZ2F0aW9uICYmIHRoaXMuX29wdGlvbnMud2FpdEZvck5hdmlnYXRpb24pIHsKICAgICAgICB2YXIgYmxvY2sgPSBuZXcgQmxvY2sodGhpcy5fZnJhbWVJZCwgewogICAgICAgICAgdHlwZTogaGVhZGxlc3NBY3Rpb25zLk5BVklHQVRJT05fUFJPTUlTRSwKICAgICAgICAgIHZhbHVlOiAnY29uc3QgbmF2aWdhdGlvblByb21pc2UgPSBwYWdlLndhaXRGb3JOYXZpZ2F0aW9uKCknCiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuX2Jsb2Nrcy51bnNoaWZ0KGJsb2NrKTsKICAgICAgfQoKICAgICAgdGhpcy5fcG9zdFByb2Nlc3MoKTsKCiAgICAgIHZhciBpbmRlbnQgPSB0aGlzLl9vcHRpb25zLndyYXBBc3luYyA/ICcgICcgOiAnJzsKICAgICAgdmFyIG5ld0xpbmUgPSAiXG4iOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuX2Jsb2NrcyksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfYmxvY2sgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICB2YXIgbGluZXMgPSBfYmxvY2suZ2V0TGluZXMoKTsKCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGxpbmVzKSwKICAgICAgICAgICAgICBfc3RlcDI7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgbGluZSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICByZXN1bHQgKz0gaW5kZW50ICsgbGluZS52YWx1ZSArIG5ld0xpbmU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9zZXRGcmFtZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRGcmFtZXMoZnJhbWVJZCwgZnJhbWVVcmwpIHsKICAgICAgaWYgKGZyYW1lSWQgJiYgZnJhbWVJZCAhPT0gMCkgewogICAgICAgIHRoaXMuX2ZyYW1lSWQgPSBmcmFtZUlkOwogICAgICAgIHRoaXMuX2ZyYW1lID0gImZyYW1lXyIuY29uY2F0KGZyYW1lSWQpOwogICAgICAgIHRoaXMuX2FsbEZyYW1lc1tmcmFtZUlkXSA9IGZyYW1lVXJsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2ZyYW1lSWQgPSAwOwogICAgICAgIHRoaXMuX2ZyYW1lID0gJ3BhZ2UnOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX3Bvc3RQcm9jZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3MoKSB7CiAgICAgIC8vIHdoZW4gZXZlbnRzIGFyZSByZWNvcmRlZCBmcm9tIGRpZmZlcmVudCBmcmFtZXMsIHdlIHdhbnQgdG8gYWRkIGEgZnJhbWUgc2V0dGVyIG5lYXIgdGhlIGNvZGUgdGhhdCB1c2VzIHRoYXQgZnJhbWUKICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuX2FsbEZyYW1lcykubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuX3Bvc3RQcm9jZXNzU2V0RnJhbWVzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9vcHRpb25zLmJsYW5rTGluZXNCZXR3ZWVuQmxvY2tzICYmIHRoaXMuX2Jsb2Nrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5fcG9zdFByb2Nlc3NBZGRCbGFua0xpbmVzKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlS2V5RG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUtleURvd24oc2VsZWN0b3IsIHZhbHVlKSB7CiAgICAgIHZhciBibG9jayA9IG5ldyBCbG9jayh0aGlzLl9mcmFtZUlkKTsKICAgICAgYmxvY2suYWRkTGluZSh7CiAgICAgICAgdHlwZTogZXZlbnRzVG9SZWNvcmQuS0VZRE9XTiwKICAgICAgICB2YWx1ZTogImF3YWl0ICIuY29uY2F0KHRoaXMuX2ZyYW1lLCAiLnR5cGUoJyIpLmNvbmNhdChzZWxlY3RvciwgIicsICciKS5jb25jYXQodGhpcy5fZXNjYXBlVXNlcklucHV0KHZhbHVlKSwgIicpIikKICAgICAgfSk7CiAgICAgIHJldHVybiBibG9jazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDbGljayhzZWxlY3RvcikgewogICAgICB2YXIgYmxvY2sgPSBuZXcgQmxvY2sodGhpcy5fZnJhbWVJZCk7CgogICAgICBpZiAodGhpcy5fb3B0aW9ucy53YWl0Rm9yU2VsZWN0b3JPbkNsaWNrKSB7CiAgICAgICAgYmxvY2suYWRkTGluZSh7CiAgICAgICAgICB0eXBlOiBldmVudHNUb1JlY29yZC5DTElDSywKICAgICAgICAgIHZhbHVlOiAiYXdhaXQgIi5jb25jYXQodGhpcy5fZnJhbWUsICIud2FpdEZvclNlbGVjdG9yKCciKS5jb25jYXQoc2VsZWN0b3IsICInKSIpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGJsb2NrLmFkZExpbmUoewogICAgICAgIHR5cGU6IGV2ZW50c1RvUmVjb3JkLkNMSUNLLAogICAgICAgIHZhbHVlOiAiYXdhaXQgIi5jb25jYXQodGhpcy5fZnJhbWUsICIuY2xpY2soJyIpLmNvbmNhdChzZWxlY3RvciwgIicpIikKICAgICAgfSk7CiAgICAgIHJldHVybiBibG9jazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2hhbmdlKHNlbGVjdG9yLCB2YWx1ZSkgewogICAgICByZXR1cm4gbmV3IEJsb2NrKHRoaXMuX2ZyYW1lSWQsIHsKICAgICAgICB0eXBlOiBldmVudHNUb1JlY29yZC5DSEFOR0UsCiAgICAgICAgdmFsdWU6ICJhd2FpdCAiLmNvbmNhdCh0aGlzLl9mcmFtZSwgIi5zZWxlY3QoJyIpLmNvbmNhdChzZWxlY3RvciwgIicsICciKS5jb25jYXQodmFsdWUsICInKSIpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9oYW5kbGVHb3RvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlR290byhocmVmKSB7CiAgICAgIHJldHVybiBuZXcgQmxvY2sodGhpcy5fZnJhbWVJZCwgewogICAgICAgIHR5cGU6IGhlYWRsZXNzQWN0aW9ucy5HT1RPLAogICAgICAgIHZhbHVlOiAiYXdhaXQgIi5jb25jYXQodGhpcy5fZnJhbWUsICIuZ290bygnIikuY29uY2F0KGhyZWYsICInKSIpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9oYW5kbGVWaWV3cG9ydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVZpZXdwb3J0KCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZC4nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlU2NyZWVuc2hvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVNjcmVlbnNob3QodmFsdWUpIHsKICAgICAgdGhpcy5fc2NyZWVuc2hvdENvdW50ZXIgKz0gMTsKCiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHJldHVybiBuZXcgQmxvY2sodGhpcy5fZnJhbWVJZCwgewogICAgICAgICAgdHlwZTogaGVhZGxlc3NBY3Rpb25zLlNDUkVFTlNIT1QsCiAgICAgICAgICB2YWx1ZTogImNvbnN0IGVsZW1lbnQiLmNvbmNhdCh0aGlzLl9zY3JlZW5zaG90Q291bnRlciwgIiA9IGF3YWl0IHBhZ2UuJCgnIikuY29uY2F0KHZhbHVlLCAiJylcbmF3YWl0IGVsZW1lbnQiKS5jb25jYXQodGhpcy5fc2NyZWVuc2hvdENvdW50ZXIsICIuc2NyZWVuc2hvdCh7IHBhdGg6ICdzY3JlZW5zaG90XyIpLmNvbmNhdCh0aGlzLl9zY3JlZW5zaG90Q291bnRlciwgIi5wbmcnIH0pIikKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBCbG9jayh0aGlzLl9mcmFtZUlkLCB7CiAgICAgICAgdHlwZTogaGVhZGxlc3NBY3Rpb25zLlNDUkVFTlNIT1QsCiAgICAgICAgdmFsdWU6ICJhd2FpdCAiLmNvbmNhdCh0aGlzLl9mcmFtZSwgIi5zY3JlZW5zaG90KHsgcGF0aDogJ3NjcmVlbnNob3RfIikuY29uY2F0KHRoaXMuX3NjcmVlbnNob3RDb3VudGVyLCAiLnBuZycsIGZ1bGxQYWdlOiB0cnVlIH0pIikKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZVdhaXRGb3JOYXZpZ2F0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2FpdEZvck5hdmlnYXRpb24oKSB7CiAgICAgIHZhciBibG9jayA9IG5ldyBCbG9jayh0aGlzLl9mcmFtZUlkKTsKCiAgICAgIGlmICh0aGlzLl9vcHRpb25zLndhaXRGb3JOYXZpZ2F0aW9uKSB7CiAgICAgICAgYmxvY2suYWRkTGluZSh7CiAgICAgICAgICB0eXBlOiBoZWFkbGVzc0FjdGlvbnMuTkFWSUdBVElPTiwKICAgICAgICAgIHZhbHVlOiAiYXdhaXQgbmF2aWdhdGlvblByb21pc2UiCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBibG9jazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcG9zdFByb2Nlc3NTZXRGcmFtZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzc1NldEZyYW1lcygpIHsKICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9ibG9ja3MuZW50cmllcygpKSwKICAgICAgICAgIF9zdGVwMzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfc3RlcDMkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDMudmFsdWUsIDIpLAogICAgICAgICAgICAgIGkgPSBfc3RlcDMkdmFsdWVbMF0sCiAgICAgICAgICAgICAgYmxvY2sgPSBfc3RlcDMkdmFsdWVbMV07CgogICAgICAgICAgdmFyIGxpbmVzID0gYmxvY2suZ2V0TGluZXMoKTsKCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGxpbmVzKSwKICAgICAgICAgICAgICBfc3RlcDQ7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgbGluZSA9IF9zdGVwNC52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKGxpbmUuZnJhbWVJZCAmJiBPYmplY3Qua2V5cyh0aGlzLl9hbGxGcmFtZXMpLmluY2x1ZGVzKGxpbmUuZnJhbWVJZC50b1N0cmluZygpKSkgewogICAgICAgICAgICAgICAgdmFyIGRlY2xhcmF0aW9uID0gImNvbnN0IGZyYW1lXyIuY29uY2F0KGxpbmUuZnJhbWVJZCwgIiA9IGZyYW1lcy5maW5kKGYgPT4gZi51cmwoKSA9PT0gJyIpLmNvbmNhdCh0aGlzLl9hbGxGcmFtZXNbbGluZS5mcmFtZUlkXSwgIicpIik7CgogICAgICAgICAgICAgICAgdGhpcy5fYmxvY2tzW2ldLmFkZExpbmVUb1RvcCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6IGhlYWRsZXNzQWN0aW9ucy5GUkFNRV9TRVQsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBkZWNsYXJhdGlvbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdGhpcy5fYmxvY2tzW2ldLmFkZExpbmVUb1RvcCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6IGhlYWRsZXNzQWN0aW9ucy5GUkFNRV9TRVQsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGV0IGZyYW1lcyA9IGF3YWl0IHBhZ2UuZnJhbWVzKCknCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fYWxsRnJhbWVzW2xpbmUuZnJhbWVJZF07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcG9zdFByb2Nlc3NBZGRCbGFua0xpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3NBZGRCbGFua0xpbmVzKCkgewogICAgICB2YXIgaSA9IDA7CgogICAgICB3aGlsZSAoaSA8PSB0aGlzLl9ibG9ja3MubGVuZ3RoKSB7CiAgICAgICAgdmFyIGJsYW5rTGluZSA9IG5ldyBCbG9jaygpOwogICAgICAgIGJsYW5rTGluZS5hZGRMaW5lKHsKICAgICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgICB2YWx1ZTogJycKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5fYmxvY2tzLnNwbGljZShpLCAwLCBibGFua0xpbmUpOwoKICAgICAgICBpICs9IDI7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZXNjYXBlVXNlcklucHV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZXNjYXBlVXNlcklucHV0KHZhbHVlKSB7CiAgICAgIHZhciBfdmFsdWUkcmVwbGFjZTsKCiAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF92YWx1ZSRyZXBsYWNlID0gdmFsdWUucmVwbGFjZSgvXFwvZywgJ1xcXFwnKSkgPT09IG51bGwgfHwgX3ZhbHVlJHJlcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSRyZXBsYWNlLnJlcGxhY2UoLycvZywgIlxcJyIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEJhc2VHZW5lcmF0b3I7Cn0oKTsKCmV4cG9ydCB7IEJhc2VHZW5lcmF0b3IgYXMgZGVmYXVsdCB9Ow=="},null]}