{"remainingRequest":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js!/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js!/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js??ref--13-0!/Users/coryhack/repSteps-recorder/src/modules/shooter/index.js","dependencies":[{"path":"/Users/coryhack/repSteps-recorder/src/modules/shooter/index.js","mtime":1642800781936},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js","mtime":1643048371203},{"path":"/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js","mtime":1643048374140},{"path":"/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js","mtime":1643048371599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvY29yeWhhY2svcmVwU3RlcHMtcmVjb3JkZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvY29yeWhhY2svcmVwU3RlcHMtcmVjb3JkZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiL1VzZXJzL2NvcnloYWNrL3JlcFN0ZXBzLXJlY29yZGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9jb3J5aGFjay9yZXBTdGVwcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9jb3J5aGFjay9yZXBTdGVwcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnOwppbXBvcnQgZ2V0U2VsZWN0b3IgZnJvbSAnQC9zZXJ2aWNlcy9zZWxlY3Rvcic7CmltcG9ydCB7IG92ZXJsYXlBY3Rpb25zLCBvdmVybGF5U2VsZWN0b3JzIH0gZnJvbSAnQC9tb2R1bGVzL292ZXJsYXkvY29uc3RhbnRzJzsKdmFyIEJPUkRFUl9USElDS05FU1MgPSAyOwoKdmFyIFNob290ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoU2hvb3RlciwgX0V2ZW50RW1pdHRlcik7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU2hvb3Rlcik7CgogIGZ1bmN0aW9uIFNob290ZXIoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LAogICAgICAgIF9yZWYkaXNDbGlwcGVkID0gX3JlZi5pc0NsaXBwZWQsCiAgICAgICAgaXNDbGlwcGVkID0gX3JlZiRpc0NsaXBwZWQgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc0NsaXBwZWQsCiAgICAgICAgc3RvcmUgPSBfcmVmLnN0b3JlOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaG9vdGVyKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoaXMuc3RvcmUgPSBzdG9yZTsKICAgIF90aGlzLmlzQ2xpcHBlZCA9IGlzQ2xpcHBlZDsKICAgIF90aGlzLl9vdmVybGF5ID0gbnVsbDsKICAgIF90aGlzLl9zZWxlY3RvciA9IG51bGw7CiAgICBfdGhpcy5fZWxlbWVudCA9IG51bGw7CiAgICBfdGhpcy5fZGltZW5zaW9ucyA9IHt9OwogICAgX3RoaXMuY3VycmVudFNlbGN0b3IgPSAnJzsKICAgIF90aGlzLl9ib3VuZGVNb3VzZU1vdmUgPSBfdGhpcy5tb3VzZW1vdmUuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5fYm91bmRlTW91c2VPdmVyID0gX3RoaXMubW91c2VvdmVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuX2JvdW5kZU1vdXNlVXAgPSBfdGhpcy5tb3VzZXVwLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuX2JvdW5kZWRLZXlVcCA9IF90aGlzLmtleXVwLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNob290ZXIsIFt7CiAgICBrZXk6ICJtb3VzZW92ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdXNlb3ZlcihlKSB7CiAgICAgIHRoaXMuY3VycmVudFNlbGN0b3IgPSBnZXRTZWxlY3RvcihlLCB7CiAgICAgICAgZGF0YUF0dHJpYnV0ZTogdGhpcy5zdG9yZS5zdGF0ZS5kYXRhQXR0cmlidXRlCiAgICAgIH0pLnJlcGxhY2UoJy4nICsgb3ZlcmxheVNlbGVjdG9ycy5DVVJTT1JfQ0FNRVJBX0NMQVNTLCAnYm9keScpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXJ0U2NyZWVuc2hvdE1vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0U2NyZWVuc2hvdE1vZGUoKSB7CiAgICAgIGlmICghdGhpcy5fb3ZlcmxheSkgewogICAgICAgIHRoaXMuX292ZXJsYXkgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgdGhpcy5fb3ZlcmxheS5pZCA9ICdoZWFkbGVzcy1yZWNvcmRlci1zaG9vdGVyJzsKICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLnRvcCA9ICcwcHgnOwogICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUubGVmdCA9ICcwcHgnOwogICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7CiAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUuekluZGV4ID0gMjE0NzQ4MzY0NjsKCiAgICAgICAgaWYgKHRoaXMuaXNDbGlwcGVkKSB7CiAgICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIHRoaXMuX3NlbGVjdG9yLmlkID0gJ2hlYWRsZXNzLXJlY29yZGVyLXNob290ZXItb3V0bGluZSc7CiAgICAgICAgICB0aGlzLl9zZWxlY3Rvci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CgogICAgICAgICAgdGhpcy5fb3ZlcmxheS5hcHBlbmRDaGlsZCh0aGlzLl9zZWxlY3Rvcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUuYm9yZGVyID0gIiIuY29uY2F0KEJPUkRFUl9USElDS05FU1MsICJweCBkYXNoZWQgcmdiYSgyNTUsIDczLCA3MywgMC43KSIpOwogICAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMjU1LCA3MywgNzMsIDAuMSknOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCF0aGlzLl9vdmVybGF5LnBhcmVudE5vZGUpIHsKICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9vdmVybGF5KTsKICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9ib3VuZGVNb3VzZU1vdmUsIGZhbHNlKTsKICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2JvdW5kZU1vdXNlVXAsIGZhbHNlKTsKICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2JvdW5kZWRLZXlVcCwgZmFsc2UpOwogICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLl9ib3VuZGVNb3VzZU92ZXIsIGZhbHNlKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInN0b3BTY3JlZW5zaG90TW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcFNjcmVlbnNob3RNb2RlKCkgewogICAgICBpZiAodGhpcy5fb3ZlcmxheSkgewogICAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX292ZXJsYXkpOwogICAgICB9CgogICAgICB0aGlzLl9vdmVybGF5ID0gdGhpcy5fc2VsZWN0b3IgPSB0aGlzLl9lbGVtZW50ID0gbnVsbDsKICAgICAgdGhpcy5fZGltZW5zaW9ucyA9IHt9OwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dTY3JlZW5zaG90RWZmZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93U2NyZWVuc2hvdEVmZmVjdCgpIHsKICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChvdmVybGF5U2VsZWN0b3JzLkZMQVNIX0NMQVNTKTsKICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShvdmVybGF5U2VsZWN0b3JzLkNVUlNPUl9DQU1FUkFfQ0xBU1MpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gd2luZG93LmRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShvdmVybGF5U2VsZWN0b3JzLkZMQVNIX0NMQVNTKTsKICAgICAgfSwgMTAwMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkQ2FtZXJhSWNvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2FtZXJhSWNvbigpIHsKICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChvdmVybGF5U2VsZWN0b3JzLkNVUlNPUl9DQU1FUkFfQ0xBU1MpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUNhbWVyYUljb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNhbWVyYUljb24oKSB7CiAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUob3ZlcmxheVNlbGVjdG9ycy5DVVJTT1JfQ0FNRVJBX0NMQVNTKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3VzZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdXNlbW92ZShlKSB7CiAgICAgIGlmICh0aGlzLl9lbGVtZW50ICE9PSBlLnRhcmdldCkgewogICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlLnRhcmdldDsKICAgICAgICB0aGlzLl9kaW1lbnNpb25zLnRvcCA9IC13aW5kb3cuc2Nyb2xsWTsKICAgICAgICB0aGlzLl9kaW1lbnNpb25zLmxlZnQgPSAtd2luZG93LnNjcm9sbFg7CiAgICAgICAgdmFyIGVsZW0gPSBlLnRhcmdldDsKCiAgICAgICAgd2hpbGUgKGVsZW0gJiYgZWxlbSAhPT0gd2luZG93LmRvY3VtZW50LmJvZHkpIHsKICAgICAgICAgIHRoaXMuX2RpbWVuc2lvbnMudG9wICs9IGVsZW0ub2Zmc2V0VG9wOwogICAgICAgICAgdGhpcy5fZGltZW5zaW9ucy5sZWZ0ICs9IGVsZW0ub2Zmc2V0TGVmdDsKICAgICAgICAgIGVsZW0gPSBlbGVtLm9mZnNldFBhcmVudDsKICAgICAgICB9CgogICAgICAgIHRoaXMuX2RpbWVuc2lvbnMud2lkdGggPSB0aGlzLl9lbGVtZW50Lm9mZnNldFdpZHRoOwogICAgICAgIHRoaXMuX2RpbWVuc2lvbnMuaGVpZ2h0ID0gdGhpcy5fZWxlbWVudC5vZmZzZXRIZWlnaHQ7CgogICAgICAgIGlmICh0aGlzLl9zZWxlY3RvcikgewogICAgICAgICAgdGhpcy5fc2VsZWN0b3Iuc3R5bGUudG9wID0gdGhpcy5fZGltZW5zaW9ucy50b3AgLSBCT1JERVJfVEhJQ0tORVNTICsgJ3B4JzsKICAgICAgICAgIHRoaXMuX3NlbGVjdG9yLnN0eWxlLmxlZnQgPSB0aGlzLl9kaW1lbnNpb25zLmxlZnQgLSBCT1JERVJfVEhJQ0tORVNTICsgJ3B4JzsKICAgICAgICAgIHRoaXMuX3NlbGVjdG9yLnN0eWxlLndpZHRoID0gdGhpcy5fZGltZW5zaW9ucy53aWR0aCArICdweCc7CiAgICAgICAgICB0aGlzLl9zZWxlY3Rvci5zdHlsZS5oZWlnaHQgPSB0aGlzLl9kaW1lbnNpb25zLmhlaWdodCArICdweCc7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAibW91c2V1cCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW91c2V1cChlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmNsZWFudXAoKTsKCiAgICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgICByYXc6IGUKICAgICAgICB9OwoKICAgICAgICBpZiAoX3RoaXMyLmlzQ2xpcHBlZCkgewogICAgICAgICAgcGF5bG9hZC5zZWxlY3RvciA9IF90aGlzMi5jdXJyZW50U2VsY3RvcjsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5lbWl0KCdjbGljaycsIHBheWxvYWQpOwogICAgICB9LCAxMDApOwogICAgfQogIH0sIHsKICAgIGtleTogImtleXVwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBrZXl1cChlKSB7CiAgICAgIGlmIChlLmNvZGUgIT09ICdFc2NhcGUnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmNsZWFudXAoKTsKICAgICAgdGhpcy5yZW1vdmVDYW1lcmFJY29uKCk7CiAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHsKICAgICAgICBjb250cm9sOiBvdmVybGF5QWN0aW9ucy5BQk9SVF9TQ1JFRU5TSE9UCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFudXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2JvdW5kZU1vdXNlTW92ZSwgZmFsc2UpOwogICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2JvdW5kZU1vdXNlVXAsIGZhbHNlKTsKICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9ib3VuZGVkS2V5VXAsIGZhbHNlKTsKICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuX2JvdW5kZU1vdXNlT3ZlciwgZmFsc2UpOwogICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLl9vdmVybGF5KTsKICAgICAgdGhpcy5fb3ZlcmxheSA9IG51bGw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2hvb3RlcjsKfShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0IGRlZmF1bHQgU2hvb3Rlcjs="},{"version":3,"sources":["/Users/coryhack/repSteps-recorder/src/modules/shooter/index.js"],"names":["EventEmitter","getSelector","overlayActions","overlaySelectors","BORDER_THICKNESS","Shooter","isClipped","store","_overlay","_selector","_element","_dimensions","currentSelctor","_boundeMouseMove","mousemove","bind","_boundeMouseOver","mouseover","_boundeMouseUp","mouseup","_boundedKeyUp","keyup","e","dataAttribute","state","replace","CURSOR_CAMERA_CLASS","window","document","createElement","id","style","position","top","left","width","height","pointerEvents","zIndex","appendChild","border","background","parentNode","body","addEventListener","removeChild","classList","add","FLASH_CLASS","remove","setTimeout","target","scrollY","scrollX","elem","offsetTop","offsetLeft","offsetParent","offsetWidth","offsetHeight","cleanup","payload","raw","selector","emit","code","removeCameraIcon","chrome","runtime","sendMessage","control","ABORT_SCREENSHOT","removeEventListener"],"mappings":"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","sourcesContent":["import EventEmitter from 'events'\nimport getSelector from '@/services/selector'\nimport { overlayActions, overlaySelectors } from '@/modules/overlay/constants'\n\nconst BORDER_THICKNESS = 2\nclass Shooter extends EventEmitter {\n  constructor({ isClipped = false, store } = {}) {\n    super()\n\n    this.store = store\n    this.isClipped = isClipped\n\n    this._overlay = null\n    this._selector = null\n    this._element = null\n    this._dimensions = {}\n    this.currentSelctor = ''\n\n    this._boundeMouseMove = this.mousemove.bind(this)\n    this._boundeMouseOver = this.mouseover.bind(this)\n    this._boundeMouseUp = this.mouseup.bind(this)\n    this._boundedKeyUp = this.keyup.bind(this)\n  }\n\n  mouseover(e) {\n    this.currentSelctor = getSelector(e, { dataAttribute: this.store.state.dataAttribute }).replace(\n      '.' + overlaySelectors.CURSOR_CAMERA_CLASS,\n      'body'\n    )\n  }\n\n  startScreenshotMode() {\n    if (!this._overlay) {\n      this._overlay = window.document.createElement('div')\n      this._overlay.id = 'headless-recorder-shooter'\n      this._overlay.style.position = 'fixed'\n      this._overlay.style.top = '0px'\n      this._overlay.style.left = '0px'\n      this._overlay.style.width = '100%'\n      this._overlay.style.height = '100%'\n      this._overlay.style.pointerEvents = 'none'\n      this._overlay.style.zIndex = 2147483646\n\n      if (this.isClipped) {\n        this._selector = window.document.createElement('div')\n        this._selector.id = 'headless-recorder-shooter-outline'\n        this._selector.style.position = 'fixed'\n        this._overlay.appendChild(this._selector)\n      } else {\n        this._overlay.style.border = `${BORDER_THICKNESS}px dashed rgba(255, 73, 73, 0.7)`\n        this._overlay.style.background = 'rgba(255, 73, 73, 0.1)'\n      }\n    }\n\n    if (!this._overlay.parentNode) {\n      window.document.body.appendChild(this._overlay)\n\n      window.document.body.addEventListener('mousemove', this._boundeMouseMove, false)\n      window.document.body.addEventListener('click', this._boundeMouseUp, false)\n      window.document.body.addEventListener('keyup', this._boundedKeyUp, false)\n      window.document.addEventListener('mouseover', this._boundeMouseOver, false)\n    }\n  }\n\n  stopScreenshotMode() {\n    if (this._overlay) {\n      window.document.body.removeChild(this._overlay)\n    }\n    this._overlay = this._selector = this._element = null\n    this._dimensions = {}\n  }\n\n  showScreenshotEffect() {\n    window.document.body.classList.add(overlaySelectors.FLASH_CLASS)\n    window.document.body.classList.remove(overlaySelectors.CURSOR_CAMERA_CLASS)\n    setTimeout(() => window.document.body.classList.remove(overlaySelectors.FLASH_CLASS), 1000)\n  }\n\n  addCameraIcon() {\n    window.document.body.classList.add(overlaySelectors.CURSOR_CAMERA_CLASS)\n  }\n\n  removeCameraIcon() {\n    window.document.body.classList.remove(overlaySelectors.CURSOR_CAMERA_CLASS)\n  }\n\n  mousemove(e) {\n    if (this._element !== e.target) {\n      this._element = e.target\n\n      this._dimensions.top = -window.scrollY\n      this._dimensions.left = -window.scrollX\n\n      let elem = e.target\n\n      while (elem && elem !== window.document.body) {\n        this._dimensions.top += elem.offsetTop\n        this._dimensions.left += elem.offsetLeft\n        elem = elem.offsetParent\n      }\n      this._dimensions.width = this._element.offsetWidth\n      this._dimensions.height = this._element.offsetHeight\n\n      if (this._selector) {\n        this._selector.style.top = this._dimensions.top - BORDER_THICKNESS + 'px'\n        this._selector.style.left = this._dimensions.left - BORDER_THICKNESS + 'px'\n        this._selector.style.width = this._dimensions.width + 'px'\n        this._selector.style.height = this._dimensions.height + 'px'\n      }\n    }\n  }\n\n  mouseup(e) {\n    setTimeout(() => {\n      this.cleanup()\n      const payload = { raw: e }\n\n      if (this.isClipped) {\n        payload.selector = this.currentSelctor\n      }\n\n      this.emit('click', payload)\n    }, 100)\n  }\n\n  keyup(e) {\n    if (e.code !== 'Escape') {\n      return\n    }\n\n    this.cleanup()\n    this.removeCameraIcon()\n    chrome.runtime.sendMessage({ control: overlayActions.ABORT_SCREENSHOT })\n  }\n\n  cleanup() {\n    window.document.body.removeEventListener('mousemove', this._boundeMouseMove, false)\n    window.document.body.removeEventListener('click', this._boundeMouseUp, false)\n    window.document.body.removeEventListener('keyup', this._boundedKeyUp, false)\n    window.document.removeEventListener('mouseover', this._boundeMouseOver, false)\n\n    window.document.body.removeChild(this._overlay)\n    this._overlay = null\n  }\n}\n\nexport default Shooter\n"]}]}