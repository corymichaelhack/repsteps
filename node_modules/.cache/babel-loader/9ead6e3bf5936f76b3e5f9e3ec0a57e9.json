{"remainingRequest":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js!/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js!/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js??ref--13-0!/Users/coryhack/repSteps-recorder/src/services/browser.js","dependencies":[{"path":"/Users/coryhack/repSteps-recorder/src/services/browser.js","mtime":1644087457193},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js","mtime":1643048371203},{"path":"/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js","mtime":1643048374140},{"path":"/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js","mtime":1643048371599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9jb3J5aGFjay9yZXBTdGVwcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvY29yeWhhY2svcmVwU3RlcHMtcmVjb3JkZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwp2YXIgQ09OVEVOVF9TQ1JJUFRfUEFUSCA9ICdqcy9jb250ZW50LXNjcmlwdC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBnZXRBY3RpdmVUYWI6IGZ1bmN0aW9uIGdldEFjdGl2ZVRhYigpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjaHJvbWUudGFicy5xdWVyeSh7CiAgICAgICAgYWN0aXZlOiB0cnVlLAogICAgICAgIGN1cnJlbnRXaW5kb3c6IHRydWUKICAgICAgfSwgZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAxKSwKICAgICAgICAgICAgdGFiID0gX3JlZjJbMF07CgogICAgICAgIHJldHVybiByZXNvbHZlKHRhYik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBzZW5kVGFiTWVzc2FnZTogZnVuY3Rpb24gc2VuZFRhYk1lc3NhZ2UoKSB7CiAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cywKICAgICAgICBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF9yZWYzLCBhY3Rpb24sIHZhbHVlLCBjbGVhbiwgdGFiOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9yZWYzID0gX2FyZ3VtZW50cy5sZW5ndGggPiAwICYmIF9hcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMF0gOiB7fSwgYWN0aW9uID0gX3JlZjMuYWN0aW9uLCB2YWx1ZSA9IF9yZWYzLnZhbHVlLCBjbGVhbiA9IF9yZWYzLmNsZWFuOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRBY3RpdmVUYWIoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICB0YWIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYi5pZCwgewogICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBjbGVhbjogY2xlYW4KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGluamVjdENvbnRlbnRTY3JpcHQ6IGZ1bmN0aW9uIGluamVjdENvbnRlbnRTY3JpcHQoKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY2hyb21lLnRhYnMuZXhlY3V0ZVNjcmlwdCh7CiAgICAgICAgZmlsZTogQ09OVEVOVF9TQ1JJUFRfUEFUSCwKICAgICAgICBhbGxGcmFtZXM6IGZhbHNlCiAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXMpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgY29weVRvQ2xpcGJvYXJkOiBmdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQodGV4dCkgewogICAgcmV0dXJuIG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7CiAgICAgIG5hbWU6ICdjbGlwYm9hcmQtd3JpdGUnCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdC5zdGF0ZSAhPT0gJ2dyYW50ZWQnICYmIHJlc3VsdC5zdGF0ZSAhPT0gJ3Byb21wdCcpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTsKICAgICAgfQoKICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7CiAgICB9KTsKICB9LAogIGdldEJhY2tncm91bmRCdXM6IGZ1bmN0aW9uIGdldEJhY2tncm91bmRCdXMoKSB7CiAgICByZXR1cm4gY2hyb21lLmV4dGVuc2lvbi5jb25uZWN0KHsKICAgICAgbmFtZTogJ3JlY29yZENvbnRyb2xzJwogICAgfSk7CiAgfSwKICBvcGVuT3B0aW9uc1BhZ2U6IGZ1bmN0aW9uIG9wZW5PcHRpb25zUGFnZSgpIHsKICAgIHZhciBfY2hyb21lJHJ1bnRpbWUkb3Blbk8sIF9jaHJvbWUkcnVudGltZTsKCiAgICAoX2Nocm9tZSRydW50aW1lJG9wZW5PID0gKF9jaHJvbWUkcnVudGltZSA9IGNocm9tZS5ydW50aW1lKS5vcGVuT3B0aW9uc1BhZ2UpID09PSBudWxsIHx8IF9jaHJvbWUkcnVudGltZSRvcGVuTyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Nocm9tZSRydW50aW1lJG9wZW5PLmNhbGwoX2Nocm9tZSRydW50aW1lKTsKICB9Cn07"},{"version":3,"sources":["/Users/coryhack/repSteps-recorder/src/services/browser.js"],"names":["CONTENT_SCRIPT_PATH","getActiveTab","Promise","resolve","chrome","tabs","query","active","currentWindow","tab","sendTabMessage","action","value","clean","sendMessage","id","injectContentScript","executeScript","file","allFrames","res","copyToClipboard","text","navigator","permissions","name","then","result","state","reject","clipboard","writeText","getBackgroundBus","extension","connect","openOptionsPage","runtime"],"mappings":";;;;AAAA,IAAMA,mBAAmB,GAAG,sBAA5B;AAEA,eAAe;AACbC,EAAAA,YADa,0BACE;AACb,WAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkB;AACnCC,MAAAA,MAAM,CAACC,IAAP,CAAYC,KAAZ,CAAkB;AAAEC,QAAAA,MAAM,EAAE,IAAV;AAAgBC,QAAAA,aAAa,EAAE;AAA/B,OAAlB,EAAyD;AAAA;AAAA,YAAEC,GAAF;;AAAA,eAAWN,OAAO,CAACM,GAAD,CAAlB;AAAA,OAAzD;AACD,KAFM,CAAP;AAGD,GALY;AAOPC,EAAAA,cAPO,4BAOuC;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6FAAJ,EAAI,EAA7BC,MAA6B,SAA7BA,MAA6B,EAArBC,KAAqB,SAArBA,KAAqB,EAAdC,KAAc,SAAdA,KAAc;AAAA;AAAA,qBAChC,KAAI,CAACZ,YAAL,EADgC;;AAAA;AAC5CQ,cAAAA,GAD4C;AAElDL,cAAAA,MAAM,CAACC,IAAP,CAAYS,WAAZ,CAAwBL,GAAG,CAACM,EAA5B,EAAgC;AAAEJ,gBAAAA,MAAM,EAANA,MAAF;AAAUC,gBAAAA,KAAK,EAALA,KAAV;AAAiBC,gBAAAA,KAAK,EAALA;AAAjB,eAAhC;;AAFkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGnD,GAVY;AAYbG,EAAAA,mBAZa,iCAYS;AACpB,WAAO,IAAId,OAAJ,CAAY,UAASC,OAAT,EAAkB;AACnCC,MAAAA,MAAM,CAACC,IAAP,CAAYY,aAAZ,CAA0B;AAAEC,QAAAA,IAAI,EAAElB,mBAAR;AAA6BmB,QAAAA,SAAS,EAAE;AAAxC,OAA1B,EAA2E,UAAAC,GAAG;AAAA,eAC5EjB,OAAO,CAACiB,GAAD,CADqE;AAAA,OAA9E;AAGD,KAJM,CAAP;AAKD,GAlBY;AAoBbC,EAAAA,eApBa,2BAoBGC,IApBH,EAoBS;AACpB,WAAOC,SAAS,CAACC,WAAV,CAAsBlB,KAAtB,CAA4B;AAAEmB,MAAAA,IAAI,EAAE;AAAR,KAA5B,EAAyDC,IAAzD,CAA8D,UAAAC,MAAM,EAAI;AAC7E,UAAIA,MAAM,CAACC,KAAP,KAAiB,SAAjB,IAA8BD,MAAM,CAACC,KAAP,KAAiB,QAAnD,EAA6D;AAC3D,eAAO1B,OAAO,CAAC2B,MAAR,EAAP;AACD;;AAEDN,MAAAA,SAAS,CAACO,SAAV,CAAoBC,SAApB,CAA8BT,IAA9B;AACD,KANM,CAAP;AAOD,GA5BY;AA8BbU,EAAAA,gBA9Ba,8BA8BM;AACjB,WAAO5B,MAAM,CAAC6B,SAAP,CAAiBC,OAAjB,CAAyB;AAAET,MAAAA,IAAI,EAAE;AAAR,KAAzB,CAAP;AACD,GAhCY;AAkCbU,EAAAA,eAlCa,6BAkCK;AAAA;;AAChB,gDAAA/B,MAAM,CAACgC,OAAP,EAAeD,eAAf;AACD;AApCY,CAAf","sourcesContent":["const CONTENT_SCRIPT_PATH = 'js/content-script.js'\n\nexport default {\n  getActiveTab() {\n    return new Promise(function(resolve) {\n      chrome.tabs.query({ active: true, currentWindow: true }, ([tab]) => resolve(tab))\n    })\n  },\n\n  async sendTabMessage({ action, value, clean } = {}) {\n    const tab = await this.getActiveTab()\n    chrome.tabs.sendMessage(tab.id, { action, value, clean })\n  },\n\n  injectContentScript() {\n    return new Promise(function(resolve) {\n      chrome.tabs.executeScript({ file: CONTENT_SCRIPT_PATH, allFrames: false }, res =>\n        resolve(res)\n      )\n    })\n  },\n\n  copyToClipboard(text) {\n    return navigator.permissions.query({ name: 'clipboard-write' }).then(result => {\n      if (result.state !== 'granted' && result.state !== 'prompt') {\n        return Promise.reject()\n      }\n\n      navigator.clipboard.writeText(text)\n    })\n  },\n\n  getBackgroundBus() {\n    return chrome.extension.connect({ name: 'recordControls' })\n  },\n\n  openOptionsPage() {\n    chrome.runtime.openOptionsPage?.()\n  },\n}\n"]}]}