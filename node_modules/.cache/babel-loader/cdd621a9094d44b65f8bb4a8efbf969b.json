{"remainingRequest":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js!/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js!/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js??ref--13-0!/Users/coryhack/repSteps-recorder/src/modules/code-generator/base-generator.js","dependencies":[{"path":"/Users/coryhack/repSteps-recorder/src/modules/code-generator/base-generator.js","mtime":1644501725049},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js","mtime":1643048371203},{"path":"/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js","mtime":1643048374140},{"path":"/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js","mtime":1643048371599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9jb3J5aGFjay9yZXBTdGVwcy1yZWNvcmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL2NvcnloYWNrL3JlcFN0ZXBzLXJlY29yZGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2NvcnloYWNrL3JlcFN0ZXBzLXJlY29yZGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgQmxvY2sgZnJvbSAnQC9tb2R1bGVzL2NvZGUtZ2VuZXJhdG9yL2Jsb2NrJzsKaW1wb3J0IHsgaGVhZGxlc3NBY3Rpb25zLCBldmVudHNUb1JlY29yZCB9IGZyb20gJ0AvbW9kdWxlcy9jb2RlLWdlbmVyYXRvci9jb25zdGFudHMnOwpleHBvcnQgdmFyIGRlZmF1bHRzID0gewogIGJsYW5rTGluZXNCZXR3ZWVuQmxvY2tzOiB0cnVlLAogIGtleUNvZGU6IDEzCn07Cgp2YXIgQmFzZUdlbmVyYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQmFzZUdlbmVyYXRvcihvcHRpb25zKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZUdlbmVyYXRvcik7CgogICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24ob3B0aW9ucyk7CiAgICB0aGlzLl9ibG9ja3MgPSBbXTsKICAgIHRoaXMuX3NjcmVlbnNob3RDb3VudGVyID0gMDsKICAgIHRoaXMuX2hhc05hdmlnYXRpb24gPSBmYWxzZTsKICB9CgogIF9jcmVhdGVDbGFzcyhCYXNlR2VuZXJhdG9yLCBbewogICAga2V5OiAiZ2VuZXJhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZC4nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcGFyc2VFdmVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wYXJzZUV2ZW50cyhldmVudHMpIHsKICAgICAgY29uc29sZS5sb2coZXZlbnRzKTsKICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICBpZiAoIWV2ZW50cykgcmV0dXJuIHJlc3VsdDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIF9ldmVudHMkaSA9IGV2ZW50c1tpXSwKICAgICAgICAgICAgYWN0aW9uID0gX2V2ZW50cyRpLmFjdGlvbiwKICAgICAgICAgICAgc2VsZWN0b3IgPSBfZXZlbnRzJGkuc2VsZWN0b3IsCiAgICAgICAgICAgIHZhbHVlID0gX2V2ZW50cyRpLnZhbHVlLAogICAgICAgICAgICBocmVmID0gX2V2ZW50cyRpLmhyZWYsCiAgICAgICAgICAgIGtleUNvZGUgPSBfZXZlbnRzJGkua2V5Q29kZSwKICAgICAgICAgICAgdGFnTmFtZSA9IF9ldmVudHMkaS50YWdOYW1lLAogICAgICAgICAgICB0ZXh0ID0gX2V2ZW50cyRpLnRleHQ7CiAgICAgICAgdmFyIGVzY2FwZWRTZWxlY3RvciA9IHNlbGVjdG9yID8gc2VsZWN0b3IgPT09IG51bGwgfHwgc2VsZWN0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdG9yLnJlcGxhY2UoL1xcL2csICdcXFxcJykgOiBzZWxlY3RvcjsKCiAgICAgICAgc3dpdGNoIChhY3Rpb24pIHsKICAgICAgICAgIGNhc2UgJ2tleWRvd24nOgogICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gdGhpcy5fb3B0aW9ucy5rZXlDb2RlKSB7CiAgICAgICAgICAgICAgdGhpcy5fYmxvY2tzLnB1c2godGhpcy5faGFuZGxlS2V5RG93bih2YWx1ZSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdjbGljayc6CiAgICAgICAgICAgIHRoaXMuX2Jsb2Nrcy5wdXNoKHRoaXMuX2hhbmRsZUNsaWNrKHRhZ05hbWUsIHRleHQpKTsKCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2NoYW5nZSc6CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhZ05hbWUpOwoKICAgICAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdTRUxFQ1QnKSB7CiAgICAgICAgICAgICAgdGhpcy5fYmxvY2tzLnB1c2godGhpcy5faGFuZGxlQ2hhbmdlKGVzY2FwZWRTZWxlY3RvciwgdmFsdWUsIHRleHQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBoZWFkbGVzc0FjdGlvbnMuVklFV1BPUlQ6CiAgICAgICAgICAgIHRoaXMuX2Jsb2Nrcy51bnNoaWZ0KHRoaXMuX2hhbmRsZVZpZXdwb3J0KHZhbHVlLndpbmRvd1dpZHRoLCB2YWx1ZS53aW5kb3dIZWlnaHQsIHZhbHVlLmJyb3dzZXJWZW5kb3IpKTsKCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgaGVhZGxlc3NBY3Rpb25zLk5BVklHQVRJT046CiAgICAgICAgICAgIHRoaXMuX2Jsb2Nrcy5wdXNoKHRoaXMuX2hhbmRsZU5hdmlnYXRpb24oaHJlZikpOwoKICAgICAgICAgICAgdGhpcy5faGFzTmF2aWdhdGlvbiA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgaGVhZGxlc3NBY3Rpb25zLlNDUkVFTlNIT1Q6CiAgICAgICAgICAgIHRoaXMuX2Jsb2Nrcy5wdXNoKHRoaXMuX2hhbmRsZVNjcmVlbnNob3QodmFsdWUpKTsKCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fcG9zdFByb2Nlc3MoKTsKCiAgICAgIHZhciBuZXdMaW5lID0gIlxuIjsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9ibG9ja3MpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgYmxvY2sgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHZhciBsaW5lcyA9IGJsb2NrLmdldExpbmVzKCk7CgogICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihsaW5lcyksCiAgICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIGxpbmUgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgcmVzdWx0ICs9IGxpbmUudmFsdWUgKyBuZXdMaW5lOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcG9zdFByb2Nlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wb3N0UHJvY2VzcygpIHsKICAgICAgaWYgKHRoaXMuX29wdGlvbnMuYmxhbmtMaW5lc0JldHdlZW5CbG9ja3MgJiYgdGhpcy5fYmxvY2tzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLl9wb3N0UHJvY2Vzc0FkZEJsYW5rTGluZXMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9oYW5kbGVLZXlEb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlS2V5RG93bih2YWx1ZSkgewogICAgICB2YXIgYmxvY2sgPSBuZXcgQmxvY2soKTsKICAgICAgYmxvY2suYWRkTGluZSh7CiAgICAgICAgdHlwZTogZXZlbnRzVG9SZWNvcmQuS0VZRE9XTiwKICAgICAgICB2YWx1ZTogIlR5cGUgdmFsdWU6ICciLmNvbmNhdCh0aGlzLl9lc2NhcGVVc2VySW5wdXQodmFsdWUpLCAiJyBpbnRvIElOUFVUIGFuZCBoaXQgUmV0dXJuL0VudGVyIikKICAgICAgfSk7CiAgICAgIHJldHVybiBibG9jazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDbGljayh0YWdOYW1lLCB0ZXh0KSB7CiAgICAgIHZhciBibG9jayA9IG5ldyBCbG9jaygpOwoKICAgICAgaWYgKHRhZ05hbWUgPT09ICdJTlBVVCcpIHsKICAgICAgICBibG9jay5hZGRMaW5lKHsKICAgICAgICAgIHR5cGU6IGV2ZW50c1RvUmVjb3JkLkNMSUNLLAogICAgICAgICAgdmFsdWU6ICJDbGljayBpbnNpZGUgIi5jb25jYXQodGFnTmFtZSwgIiBmaWVsZCIpCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYmxvY2suYWRkTGluZSh7CiAgICAgICAgICB0eXBlOiBldmVudHNUb1JlY29yZC5DTElDSywKICAgICAgICAgIHZhbHVlOiAiQ2xpY2sgIi5jb25jYXQodGFnTmFtZSwgIiB0YWcgd2l0aCB0ZXh0OiBcIiIpLmNvbmNhdCh0ZXh0LCAiXCIiKQogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gYmxvY2s7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNoYW5nZShzZWxlY3RvciwgdmFsdWUpIHsKICAgICAgcmV0dXJuIG5ldyBCbG9jayh7CiAgICAgICAgdHlwZTogZXZlbnRzVG9SZWNvcmQuQ0hBTkdFLAogICAgICAgIHZhbHVlOiAiSW5wdXQgYSB2YWx1ZSBsaWtlOiAnIi5jb25jYXQodmFsdWUsICInIikKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZVZpZXdwb3J0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVmlld3BvcnQod2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCwgYnJvd3NlclZlbmRvcikgewogICAgICByZXR1cm4gbmV3IEJsb2NrKHsKICAgICAgICB0eXBlOiBoZWFkbGVzc0FjdGlvbnMuVklFV1BPUlQsCiAgICAgICAgdmFsdWU6ICJCcm93c2VySW5mbzpcbiAgQnJvc3dlciBWZW5kb3I6ICIuY29uY2F0KGJyb3dzZXJWZW5kb3IsICJcbiAgV2luZG93IHNpemU6IHdpZHRoOiAiKS5jb25jYXQod2luZG93V2lkdGgsICIsIGhlaWdodDogIikuY29uY2F0KHdpbmRvd0hlaWdodCkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZVNjcmVlbnNob3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVTY3JlZW5zaG90KHZhbHVlKSB7CiAgICAgIHRoaXMuX3NjcmVlbnNob3RDb3VudGVyICs9IDE7CgogICAgICBpZiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gbmV3IEJsb2NrKHsKICAgICAgICAgIHR5cGU6IGhlYWRsZXNzQWN0aW9ucy5TQ1JFRU5TSE9ULAogICAgICAgICAgdmFsdWU6ICJjb25zdCBlbGVtZW50Ii5jb25jYXQodGhpcy5fc2NyZWVuc2hvdENvdW50ZXIsICIgPSBhd2FpdCBwYWdlLiQoJyIpLmNvbmNhdCh2YWx1ZSwgIicpXG5hd2FpdCBlbGVtZW50IikuY29uY2F0KHRoaXMuX3NjcmVlbnNob3RDb3VudGVyLCAiLnNjcmVlbnNob3QoeyBwYXRoOiAnc2NyZWVuc2hvdF8iKS5jb25jYXQodGhpcy5fc2NyZWVuc2hvdENvdW50ZXIsICIucG5nJyB9KSIpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgQmxvY2soewogICAgICAgIHR5cGU6IGhlYWRsZXNzQWN0aW9ucy5TQ1JFRU5TSE9ULAogICAgICAgIHZhbHVlOiAiYXdhaXQgIi5jb25jYXQodGhpcy5fZnJhbWUsICIuc2NyZWVuc2hvdCh7IHBhdGg6ICdzY3JlZW5zaG90XyIpLmNvbmNhdCh0aGlzLl9zY3JlZW5zaG90Q291bnRlciwgIi5wbmcnLCBmdWxsUGFnZTogdHJ1ZSB9KSIpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9oYW5kbGVOYXZpZ2F0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTmF2aWdhdGlvbihocmVmKSB7CiAgICAgIHZhciBibG9jayA9IG5ldyBCbG9jaygpOwogICAgICBibG9jay5hZGRMaW5lKHsKICAgICAgICB0eXBlOiBoZWFkbGVzc0FjdGlvbnMuTkFWSUdBVElPTiwKICAgICAgICB2YWx1ZTogIk5hdmlnYXRlIHRvOiAiLmNvbmNhdChocmVmKQogICAgICB9KTsKICAgICAgcmV0dXJuIGJsb2NrOwogICAgfQogIH0sIHsKICAgIGtleTogIl9wb3N0UHJvY2Vzc0FkZEJsYW5rTGluZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzc0FkZEJsYW5rTGluZXMoKSB7CiAgICAgIHZhciBpID0gMDsKCiAgICAgIHdoaWxlIChpIDw9IHRoaXMuX2Jsb2Nrcy5sZW5ndGgpIHsKICAgICAgICB2YXIgYmxhbmtMaW5lID0gbmV3IEJsb2NrKCk7CiAgICAgICAgYmxhbmtMaW5lLmFkZExpbmUoewogICAgICAgICAgdHlwZTogbnVsbCwKICAgICAgICAgIHZhbHVlOiAnJwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLl9ibG9ja3Muc3BsaWNlKGksIDAsIGJsYW5rTGluZSk7CgogICAgICAgIGkgKz0gMjsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9lc2NhcGVVc2VySW5wdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9lc2NhcGVVc2VySW5wdXQodmFsdWUpIHsKICAgICAgdmFyIF92YWx1ZSRyZXBsYWNlOwoKICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3ZhbHVlJHJlcGxhY2UgPSB2YWx1ZS5yZXBsYWNlKC9cXC9nLCAnXFxcXCcpKSA9PT0gbnVsbCB8fCBfdmFsdWUkcmVwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlJHJlcGxhY2UucmVwbGFjZSgvJy9nLCAiXFwnIik7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQmFzZUdlbmVyYXRvcjsKfSgpOwoKZXhwb3J0IHsgQmFzZUdlbmVyYXRvciBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/Users/coryhack/repSteps-recorder/src/modules/code-generator/base-generator.js"],"names":["Block","headlessActions","eventsToRecord","defaults","blankLinesBetweenBlocks","keyCode","BaseGenerator","options","_options","Object","assign","_blocks","_screenshotCounter","_hasNavigation","Error","events","console","log","result","i","length","action","selector","value","href","tagName","text","escapedSelector","replace","push","_handleKeyDown","_handleClick","_handleChange","VIEWPORT","unshift","_handleViewport","windowWidth","windowHeight","browserVendor","NAVIGATION","_handleNavigation","SCREENSHOT","_handleScreenshot","_postProcess","newLine","block","lines","getLines","line","_postProcessAddBlankLines","addLine","type","KEYDOWN","_escapeUserInput","CLICK","CHANGE","_frame","blankLine","splice"],"mappings":"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","sourcesContent":["import Block from '@/modules/code-generator/block'\nimport { headlessActions, eventsToRecord } from '@/modules/code-generator/constants'\n\nexport const defaults = {\n  blankLinesBetweenBlocks: true,\n  keyCode: 13,\n}\nexport default class BaseGenerator {\n  constructor(options) {\n    this._options = Object.assign(options)\n    this._blocks = []\n    this._screenshotCounter = 0\n\n    this._hasNavigation = false\n  }\n\n  generate() {\n    throw new Error('Not implemented.')\n  }\n\n  _parseEvents(events) {\n    console.log(events)\n    let result = ''\n\n    if (!events) return result\n    for (let i = 0; i < events.length; i++) {\n      const { action, selector, value, href, keyCode, tagName, text } = events[i]\n      const escapedSelector = selector ? selector?.replace(/\\\\/g, '\\\\\\\\') : selector\n\n      switch (action) {\n        case 'keydown':\n          if (keyCode === this._options.keyCode) {\n            this._blocks.push(this._handleKeyDown(value))\n          }\n          break\n        case 'click':\n          this._blocks.push(this._handleClick(tagName, text))\n          break\n        case 'change':\n          console.log(tagName)\n          if (tagName === 'SELECT') {\n            this._blocks.push(this._handleChange(escapedSelector, value, text))\n          }\n          break\n        case headlessActions.VIEWPORT:\n          this._blocks.unshift(\n            this._handleViewport(value.windowWidth, value.windowHeight, value.browserVendor)\n          )\n          break\n        case headlessActions.NAVIGATION:\n          this._blocks.push(this._handleNavigation(href))\n          this._hasNavigation = true\n          break\n        case headlessActions.SCREENSHOT:\n          this._blocks.push(this._handleScreenshot(value))\n          break\n      }\n    }\n\n    this._postProcess()\n\n    const newLine = `\\n`\n\n    for (let block of this._blocks) {\n      const lines = block.getLines()\n      for (let line of lines) {\n        result += line.value + newLine\n      }\n    }\n\n    return result\n  }\n\n  _postProcess() {\n    if (this._options.blankLinesBetweenBlocks && this._blocks.length > 0) {\n      this._postProcessAddBlankLines()\n    }\n  }\n\n  _handleKeyDown(value) {\n    const block = new Block()\n    block.addLine({\n      type: eventsToRecord.KEYDOWN,\n      value: `Type value: '${this._escapeUserInput(value)}' into INPUT and hit Return/Enter`,\n    })\n    return block\n  }\n\n  _handleClick(tagName, text) {\n    const block = new Block()\n    if (tagName === 'INPUT') {\n      block.addLine({\n        type: eventsToRecord.CLICK,\n        value: `Click inside ${tagName} field`,\n      })\n    } else {\n      block.addLine({\n        type: eventsToRecord.CLICK,\n        value: `Click ${tagName} tag with text: \"${text}\"`,\n      })\n    }\n    return block\n  }\n\n  _handleChange(selector, value) {\n    return new Block({\n      type: eventsToRecord.CHANGE,\n      value: `Input a value like: '${value}'`,\n    })\n  }\n\n  _handleViewport(windowWidth, windowHeight, browserVendor) {\n    return new Block({\n      type: headlessActions.VIEWPORT,\n      value: `BrowserInfo:\\n  Broswer Vendor: ${browserVendor}\\n  Window size: width: ${windowWidth}, height: ${windowHeight}`,\n    })\n  }\n\n  _handleScreenshot(value) {\n    this._screenshotCounter += 1\n\n    if (value) {\n      return new Block({\n        type: headlessActions.SCREENSHOT,\n        value: `const element${this._screenshotCounter} = await page.$('${value}')\nawait element${this._screenshotCounter}.screenshot({ path: 'screenshot_${this._screenshotCounter}.png' })`,\n      })\n    }\n\n    return new Block({\n      type: headlessActions.SCREENSHOT,\n      value: `await ${this._frame}.screenshot({ path: 'screenshot_${this._screenshotCounter}.png', fullPage: true })`,\n    })\n  }\n\n  _handleNavigation(href) {\n    const block = new Block()\n    block.addLine({\n      type: headlessActions.NAVIGATION,\n      value: `Navigate to: ${href}`,\n    })\n    return block\n  }\n\n  _postProcessAddBlankLines() {\n    let i = 0\n    while (i <= this._blocks.length) {\n      const blankLine = new Block()\n      blankLine.addLine({ type: null, value: '' })\n      this._blocks.splice(i, 0, blankLine)\n      i += 2\n    }\n  }\n\n  _escapeUserInput(value) {\n    return value?.replace(/\\\\/g, '\\\\\\\\')?.replace(/'/g, \"\\\\'\")\n  }\n}\n"]}]}