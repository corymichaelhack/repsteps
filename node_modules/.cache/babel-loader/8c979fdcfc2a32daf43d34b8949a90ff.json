{"remainingRequest":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js!/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js!/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js??ref--13-0!/Users/coryhack/repSteps-recorder/src/modules/overlay/index.js","dependencies":[{"path":"/Users/coryhack/repSteps-recorder/src/modules/overlay/index.js","mtime":1642800781935},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/thread-loader/dist/cjs.js","mtime":1643048371203},{"path":"/Users/coryhack/repSteps-recorder/node_modules/babel-loader/lib/index.js","mtime":1643048374140},{"path":"/Users/coryhack/repSteps-recorder/node_modules/eslint-loader/index.js","mtime":1643048371599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvY29yeWhhY2svcmVwU3RlcHMtcmVjb3JkZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvY29yeWhhY2svcmVwU3RlcHMtcmVjb3JkZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICd2dWUnOwppbXBvcnQgZ2V0U2VsZWN0b3IgZnJvbSAnQC9zZXJ2aWNlcy9zZWxlY3Rvcic7CmltcG9ydCBTZWxlY3RvckFwcCBmcm9tICdAL21vZHVsZXMvb3ZlcmxheS9TZWxlY3Rvci52dWUnOwppbXBvcnQgT3ZlcmxheUFwcCBmcm9tICdAL21vZHVsZXMvb3ZlcmxheS9PdmVybGF5LnZ1ZSc7CmltcG9ydCB7IG92ZXJsYXlTZWxlY3RvcnMgfSBmcm9tICdAL21vZHVsZXMvb3ZlcmxheS9jb25zdGFudHMnOwoKdmFyIE92ZXJsYXkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE92ZXJsYXkoX3JlZikgewogICAgdmFyIHN0b3JlID0gX3JlZi5zdG9yZTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT3ZlcmxheSk7CgogICAgdGhpcy5vdmVybGF5QXBwID0gbnVsbDsKICAgIHRoaXMuc2VsZWN0b3JBcHAgPSBudWxsOwogICAgdGhpcy5vdmVybGF5Q29udGFpbmVyID0gbnVsbDsKICAgIHRoaXMuc2VsZWN0b3JDb250YWluZXIgPSBudWxsOwogICAgdGhpcy5tb3VzZU92ZXJFdmVudCA9IG51bGw7CiAgICB0aGlzLnNjcm9sbEV2ZW50ID0gbnVsbDsKICAgIHRoaXMuaXNTY3JvbGxpbmcgPSBmYWxzZTsKICAgIHRoaXMuc3RvcmUgPSBzdG9yZTsKICB9CgogIF9jcmVhdGVDbGFzcyhPdmVybGF5LCBbewogICAga2V5OiAibW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwKICAgICAgICAgIF9yZWYyJGNsZWFyID0gX3JlZjIuY2xlYXIsCiAgICAgICAgICBjbGVhciA9IF9yZWYyJGNsZWFyID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJGNsZWFyLAogICAgICAgICAgX3JlZjIkcGF1c2UgPSBfcmVmMi5wYXVzZSwKICAgICAgICAgIHBhdXNlID0gX3JlZjIkcGF1c2UgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjIkcGF1c2U7CgogICAgICBpZiAodGhpcy5vdmVybGF5Q29udGFpbmVyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLm92ZXJsYXlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyLmlkID0gb3ZlcmxheVNlbGVjdG9ycy5PVkVSTEFZX0lEOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheUNvbnRhaW5lcik7CiAgICAgIHRoaXMuc2VsZWN0b3JDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgdGhpcy5zZWxlY3RvckNvbnRhaW5lci5pZCA9IG92ZXJsYXlTZWxlY3RvcnMuU0VMRUNUT1JfSUQ7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5zZWxlY3RvckNvbnRhaW5lcik7CgogICAgICBpZiAoY2xlYXIpIHsKICAgICAgICB0aGlzLnN0b3JlLmNvbW1pdCgnY2xlYXInKTsKICAgICAgfQoKICAgICAgaWYgKHBhdXNlKSB7CiAgICAgICAgdGhpcy5zdG9yZS5jb21taXQoJ3BhdXNlJyk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2VsZWN0b3JBcHAgPSBjcmVhdGVBcHAoU2VsZWN0b3JBcHApLnVzZSh0aGlzLnN0b3JlKS5tb3VudCgnIycgKyBvdmVybGF5U2VsZWN0b3JzLlNFTEVDVE9SX0lEKTsKICAgICAgdGhpcy5vdmVybGF5QXBwID0gY3JlYXRlQXBwKE92ZXJsYXlBcHApLnVzZSh0aGlzLnN0b3JlKS5tb3VudCgnIycgKyBvdmVybGF5U2VsZWN0b3JzLk9WRVJMQVlfSUQpOwoKICAgICAgdGhpcy5tb3VzZU92ZXJFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHNlbGVjdG9yID0gZ2V0U2VsZWN0b3IoZSwgewogICAgICAgICAgZGF0YUF0dHJpYnV0ZTogX3RoaXMuc3RvcmUuc3RhdGUuZGF0YUF0dHJpYnV0ZQogICAgICAgIH0pOwogICAgICAgIF90aGlzLm92ZXJsYXlBcHAuY3VycmVudFNlbGVjdG9yID0gc2VsZWN0b3IuaW5jbHVkZXMoJyMnICsgb3ZlcmxheVNlbGVjdG9ycy5PVkVSTEFZX0lEKSA/ICcnIDogc2VsZWN0b3I7CgogICAgICAgIGlmIChfdGhpcy5vdmVybGF5QXBwLmN1cnJlbnRTZWxlY3RvciAmJiAoIV90aGlzLnN0b3JlLnN0YXRlLnNjcmVlbnNob3RNb2RlIHx8IF90aGlzLnN0b3JlLnN0YXRlLnNjcmVlbnNob3RDbGlwcGVkTW9kZSkpIHsKICAgICAgICAgIF90aGlzLnNlbGVjdG9yQXBwLm1vdmUoZSwgW292ZXJsYXlTZWxlY3RvcnMuT1ZFUkxBWV9JRF0pOwogICAgICAgIH0KICAgICAgfTsgLy8gSGlkZSBzZWxlY3RvciB3aGlsZSB0aGUgdXNlciBpcyBzY3JvbGxpbmcKCgogICAgICB0aGlzLnNjcm9sbEV2ZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnNlbGVjdG9yQXBwLnNjcm9sbGluZyA9IHRydWU7CiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChfdGhpcy5pc1Njcm9sbGluZyk7CiAgICAgICAgX3RoaXMuaXNTY3JvbGxpbmcgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RvckFwcC5zY3JvbGxpbmcgPSBmYWxzZTsKICAgICAgICB9LCA2Nik7CiAgICAgIH07CgogICAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5tb3VzZU92ZXJFdmVudCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbEV2ZW50LCBmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5tb3VudCgpIHsKICAgICAgaWYgKCF0aGlzLm92ZXJsYXlDb250YWluZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5vdmVybGF5Q29udGFpbmVyKTsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLnNlbGVjdG9yQ29udGFpbmVyKTsKICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyID0gbnVsbDsKICAgICAgdGhpcy5vdmVybGF5QXBwID0gbnVsbDsKICAgICAgdGhpcy5zZWxlY3RvckNvbnRhaW5lciA9IG51bGw7CiAgICAgIHRoaXMuc2VsZWN0b3JBcHAgPSBudWxsOwogICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5tb3VzZU92ZXJFdmVudCk7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbEV2ZW50LCBmYWxzZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gT3ZlcmxheTsKfSgpOwoKZXhwb3J0IHsgT3ZlcmxheSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/Users/coryhack/repSteps-recorder/src/modules/overlay/index.js"],"names":["createApp","getSelector","SelectorApp","OverlayApp","overlaySelectors","Overlay","store","overlayApp","selectorApp","overlayContainer","selectorContainer","mouseOverEvent","scrollEvent","isScrolling","clear","pause","document","createElement","id","OVERLAY_ID","body","appendChild","SELECTOR_ID","commit","use","mount","e","selector","dataAttribute","state","currentSelector","includes","screenshotMode","screenshotClippedMode","move","scrolling","window","clearTimeout","setTimeout","addEventListener","removeChild","removeEventListener"],"mappings":"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","sourcesContent":["import { createApp } from 'vue'\n\nimport getSelector from '@/services/selector'\nimport SelectorApp from '@/modules/overlay/Selector.vue'\nimport OverlayApp from '@/modules/overlay/Overlay.vue'\nimport { overlaySelectors } from '@/modules/overlay/constants'\n\nexport default class Overlay {\n  constructor({ store }) {\n    this.overlayApp = null\n    this.selectorApp = null\n\n    this.overlayContainer = null\n    this.selectorContainer = null\n\n    this.mouseOverEvent = null\n    this.scrollEvent = null\n    this.isScrolling = false\n\n    this.store = store\n  }\n\n  mount({ clear = false, pause = false } = {}) {\n    if (this.overlayContainer) {\n      return\n    }\n\n    this.overlayContainer = document.createElement('div')\n    this.overlayContainer.id = overlaySelectors.OVERLAY_ID\n    document.body.appendChild(this.overlayContainer)\n\n    this.selectorContainer = document.createElement('div')\n    this.selectorContainer.id = overlaySelectors.SELECTOR_ID\n    document.body.appendChild(this.selectorContainer)\n\n    if (clear) {\n      this.store.commit('clear')\n    }\n    if (pause) {\n      this.store.commit('pause')\n    }\n\n    this.selectorApp = createApp(SelectorApp)\n      .use(this.store)\n      .mount('#' + overlaySelectors.SELECTOR_ID)\n\n    this.overlayApp = createApp(OverlayApp)\n      .use(this.store)\n      .mount('#' + overlaySelectors.OVERLAY_ID)\n\n    this.mouseOverEvent = e => {\n      const selector = getSelector(e, { dataAttribute: this.store.state.dataAttribute })\n      this.overlayApp.currentSelector = selector.includes('#' + overlaySelectors.OVERLAY_ID)\n        ? ''\n        : selector\n\n      if (\n        this.overlayApp.currentSelector &&\n        (!this.store.state.screenshotMode || this.store.state.screenshotClippedMode)\n      ) {\n        this.selectorApp.move(e, [overlaySelectors.OVERLAY_ID])\n      }\n    }\n\n    // Hide selector while the user is scrolling\n    this.scrollEvent = () => {\n      this.selectorApp.scrolling = true\n      window.clearTimeout(this.isScrolling)\n      this.isScrolling = setTimeout(() => (this.selectorApp.scrolling = false), 66)\n    }\n\n    window.document.addEventListener('mouseover', this.mouseOverEvent)\n    window.addEventListener('scroll', this.scrollEvent, false)\n  }\n\n  unmount() {\n    if (!this.overlayContainer) {\n      return\n    }\n\n    document.body.removeChild(this.overlayContainer)\n    document.body.removeChild(this.selectorContainer)\n\n    this.overlayContainer = null\n    this.overlayApp = null\n    this.selectorContainer = null\n    this.selectorApp = null\n\n    window.document.removeEventListener('mouseover', this.mouseOverEvent)\n    window.removeEventListener('scroll', this.scrollEvent, false)\n  }\n}\n"]}]}