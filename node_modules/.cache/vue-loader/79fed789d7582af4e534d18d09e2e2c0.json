{"remainingRequest":"/Users/coryhack/repSteps-recorder/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/coryhack/repSteps-recorder/src/popup/PopupApp.vue?vue&type=style&index=0&id=70ab1817&lang=css","dependencies":[{"path":"/Users/coryhack/repSteps-recorder/src/popup/PopupApp.vue","mtime":1644509911127},{"path":"/Users/coryhack/repSteps-recorder/node_modules/css-loader/dist/cjs.js","mtime":1643048372848},{"path":"/Users/coryhack/repSteps-recorder/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1643048377017},{"path":"/Users/coryhack/repSteps-recorder/node_modules/postcss-loader/src/index.js","mtime":1643048374089},{"path":"/Users/coryhack/repSteps-recorder/node_modules/postcss-loader/src/index.js","mtime":1643048374089},{"path":"/Users/coryhack/repSteps-recorder/node_modules/cache-loader/dist/cjs.js","mtime":1643048371315},{"path":"/Users/coryhack/repSteps-recorder/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1643048376026}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cmh0bWwgewogIHdpZHRoOiAzODZweDsKICBoZWlnaHQ6IDUzNXB4Owp9CgpidXR0b246Zm9jdXMtdmlzaWJsZSB7CiAgb3V0bGluZTogbm9uZTsKICBib3gtc2hhZG93OiAwIDAgMnB4IDJweCAjNTFhN2U4Owp9CgpidXR0b246Zm9jdXMgewogIG91dGxpbmU6IDA7Cn0K"},{"version":3,"sources":["/Users/coryhack/repSteps-recorder/src/popup/PopupApp.vue"],"names":[],"mappings":";AAwPA,CAAC,CAAC,CAAC,EAAE;EACH,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACZ","file":"/Users/coryhack/repSteps-recorder/src/popup/PopupApp.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"bg-gray-lightest dark:bg-black flex flex-col overflow-hidden\">\n    <Header @options=\"openOptions\" @dark=\"toggleDarkMode\" />\n\n    <Home v-if=\"!showResultsTab && !isRecording\" @start=\"toggleRecord\" />\n\n    <Recording\n      @stop=\"toggleRecord\"\n      @pause=\"togglePause\"\n      @restart=\"restart(true)\"\n      :is-recording=\"isRecording\"\n      :is-paused=\"isPaused\"\n      :dark-mode=\"options?.extension?.darkMode\"\n      v-show=\"!showResultsTab && isRecording\"\n    />\n\n    <Results\n      :repSteps=\"codeForRepSteps\"\n      :options=\"options\"\n      v-if=\"showResultsTab\"\n      v-on:update:tab=\"currentResultTab = $event\"\n    />\n\n    <!-- TODO: Move this into its own component -->\n    <div\n      data-test-id=\"results-footer\"\n      class=\"flex py-2 px-3 justify-between bg-black-shady\"\n      v-show=\"showResultsTab\"\n    >\n      <Button dark class=\"mr-2\" @click=\"restart\" v-show=\"codeForRepSteps\">\n        <img src=\"/icons/dark/sync.svg\" class=\"mr-1\" alt=\"restart recording\" />\n        Restart\n      </Button>\n      <Button dark class=\"mr-2 w-34\" @click=\"copyCode\" v-show=\"codeForRepSteps\">\n        <img\n          v-show=\"!isCopying\"\n          src=\"/icons/dark/duplicate.svg\"\n          class=\"mr-1\"\n          alt=\"copy code to clipboard\"\n        />\n        <span v-show=\"!isCopying\">Copy to clipboard</span>\n        <span v-show=\"isCopying\">Copied!</span>\n      </Button>\n    </div>\n\n    <Footer v-if=\"!isRecording && !showResultsTab\" />\n  </div>\n</template>\n\n<script>\nimport browser from '@/services/browser'\nimport storage from '@/services/storage'\n// import analytics from '@/services/analytics'\nimport { popupActions, isDarkMode } from '@/services/constants'\n\nimport CodeGenerator from '@/modules/code-generator'\n\nimport Home from '@/views/Home.vue'\nimport Results from '@/views/Results.vue'\nimport Recording from '@/views/Recording.vue'\n\nimport Button from '@/components/Button.vue'\nimport Footer from '@/components/Footer.vue'\nimport Header from '@/components/Header.vue'\n\nlet bus\n\nconst defaultOptions = {\n  extension: {\n    darkMode: isDarkMode(),\n  },\n  code: {},\n}\n\nexport default {\n  name: 'PopupApp',\n  components: {\n    Results,\n    Recording,\n    Home,\n    Header,\n    Footer,\n    Button,\n  },\n\n  data() {\n    return {\n      isLoggedIn: false,\n      showResultsTab: false,\n      isRecording: false,\n      isPaused: false,\n      isCopying: false,\n      currentResultTab: null,\n      liveEvents: [],\n      recording: [],\n      codeForRepSteps: '',\n      options: defaultOptions,\n    }\n  },\n\n  watch: {\n    'options.extension.darkMode': {\n      handler(newVal) {\n        document.body.classList[newVal ? 'add' : 'remove']('dark')\n      },\n      immediate: true,\n    },\n  },\n\n  async mounted() {\n    this.loadState()\n    bus = browser.getBackgroundBus()\n  },\n\n  methods: {\n    toggleRecord(close = true) {\n      if (this.isRecording) {\n        this.stop()\n      } else {\n        close && window.close()\n        this.start()\n      }\n\n      this.isRecording = !this.isRecording\n      this.storeState()\n    },\n\n    togglePause(stop = false) {\n      bus.postMessage({ action: this.isPaused ? popupActions.UN_PAUSE : popupActions.PAUSE, stop })\n      this.isPaused = !this.isPaused\n\n      this.storeState()\n    },\n\n    start() {\n      // analytics.trackEvent({ options: this.options, event: 'Start' })\n      this.cleanUp()\n      bus.postMessage({ action: popupActions.START })\n    },\n\n    async stop() {\n      // analytics.trackEvent({ options: this.options, event: 'Stop' })\n      bus.postMessage({ action: popupActions.STOP })\n\n      await this.generateCode()\n      this.storeState()\n    },\n\n    restart(stop = false) {\n      this.cleanUp()\n      bus.postMessage({ action: popupActions.CLEAN_UP, value: stop })\n    },\n\n    cleanUp() {\n      this.recording = this.liveEvents = []\n      this.codeForRepSteps = ''\n      this.showResultsTab = this.isRecording = this.isPaused = false\n      this.storeState()\n    },\n\n    async generateCode() {\n      const { recording, options = { code: {} } } = await storage.get(['recording', 'options'])\n      const generator = new CodeGenerator(options.code)\n      const { repSteps } = generator.generate(recording)\n\n      this.recording = recording\n      this.codeForRepSteps = repSteps\n      this.showResultsTab = true\n    },\n\n    openOptions() {\n      // analytics.trackEvent({ options: this.options, event: 'Options' })\n      browser.openOptionsPage()\n    },\n\n    async loadState() {\n      const {\n        controls = {},\n        options,\n        codeForRepSteps = '',\n        recording,\n        clear,\n        pause,\n        restart,\n      } = await storage.get([\n        'controls',\n        'options',\n        'codeForRepSteps',\n        'recording',\n        'clear',\n        'pause',\n        'restart',\n      ])\n\n      this.isRecording = controls.isRecording\n      this.isPaused = controls.isPaused\n      this.options = options || defaultOptions\n      this.codeForRepSteps = codeForRepSteps\n\n      if (this.isRecording) {\n        this.liveEvents = recording\n\n        if (clear) {\n          this.toggleRecord()\n          storage.remove(['clear'])\n        }\n\n        if (pause) {\n          this.togglePause(true)\n          storage.remove(['pause'])\n        }\n\n        if (restart) {\n          this.cleanUp()\n          this.toggleRecord(false)\n          storage.remove(['restart'])\n        }\n      } else if (this.codeForRepSteps) {\n        this.generateCode()\n      }\n    },\n\n    storeState() {\n      storage.set({\n        codeForRepSteps: this.codeForRepSteps,\n        controls: { isRecording: this.isRecording, isPaused: this.isPaused },\n      })\n    },\n\n    async copyCode() {\n      this.isCopying = true\n      await browser.copyToClipboard(this.getCode())\n      setTimeout(() => (this.isCopying = false), 500)\n    },\n\n    toggleDarkMode() {\n      this.options.extension.darkMode = !this.options.extension.darkMode\n      storage.set({ options: this.options })\n    },\n\n    getCode() {\n      return this.codeForRepSteps\n    },\n  },\n}\n</script>\n\n<style>\nhtml {\n  width: 386px;\n  height: 535px;\n}\n\nbutton:focus-visible {\n  outline: none;\n  box-shadow: 0 0 2px 2px #51a7e8;\n}\n\nbutton:focus {\n  outline: 0;\n}\n</style>\n"]}]}